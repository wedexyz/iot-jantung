<!DOCTYPE html>
<html>
<head>
<title>Aplikasi Jantung</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
}

body {
  font-family: Arial;
  margin: 0;
}

/* Header */
header {
  padding: 60px;
  text-align: center;
  background: #1abc9c;
  color: white;
}

/* Top navigation bar */
.navbar {
  display: flex;
  background-color: #333;
}

/* Navigation bar links */
.navbar a {
  color: white;
  padding: 14px 20px;
  text-decoration: none;
  text-align: center;
}

/* Change color on hover */
.navbar a:hover {
  background-color: #ddd;
  color: black;
}

/* Column container */
.container {  
  display: flex;
  flex-wrap: wrap;
}

/* Sidebar/left column */
.side {
  flex: 30%;
  background-color: #f1f1f1;
  padding: 20px;
  margin :10px;
}

/* Main column */
.main {
  flex: 70%;
  background-color: white;
  padding: 10px;
}

/* Fake image, just for this example */
.fakeimg {
  background-color: #aaa;
  width: 100%;
  padding: 20px;
}

/* Footer */
footer {
  padding: 20px;
  text-align: center;
  background: #ddd;
}

/* Responsive layout - when the screen is less than 700px wide, make the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 300px) {
  .container, .navbar {   
    flex-direction: column;
  }
}
</style>
</head>
<body>

<!-- Note -->
<div style="background:rgb(2, 2, 2);padding:5px;text-align:center; margin: 10px;">
  <h1 style="color: #f1f1f1;">Aplikasi Jantung</h1>
</div>




<!-- Content Container -->
<div class="container">
  <div class="side">
    <h2>Data jantung <span id="data"></span> (bpm)  </h2>
    <h5>Beat Per Minute</h5>

  </div>
  <div class="main">
    
    <div  id="grafik" style="height:300px;"></div>
   </div>
</div>


<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<!--


-->
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>






<script src= "firebase.js"></script>
<script>
    var config = {
    apiKey: "AIzaSyAhopUXfUnSNw8O2R3NT9w0Z9SeO7ox58A",
    authDomain: "kknbanyuwangi2023.firebaseapp.com",
    databaseURL: "https://kknbanyuwangi2023-default-rtdb.firebaseio.com",
    projectId: "kknbanyuwangi2023",
    storageBucket: "kknbanyuwangi2023.firebasestorage.app",
    messagingSenderId: "643889264073",
    appId: "1:643889264073:web:2b0d5ba40d81e3138fe418",
    measurementId: "G-GXGM5WJZL1"

  };
firebase.initializeApp(config);
var db = firebase.database();
var tes = db.ref("/pulse/bpm");

//s.on("value", function(snapshot) { document.getElementById('data').innerHTML=snapshot.val();});
Highcharts.stockChart('grafik', {
    chart: {
        //backgroundColor: 'transparent',
      //ype: 'line',
    
        //type: 'spline',

                  
        events: {
            load: function () {

                // set up the updating of the chart each second
                const series = this.series[0];
                setInterval(function () {
                        tes.on("value", function(snapshot) {
                        const x = (new Date()).getTime(), // current time
                        
                        y= snapshot.val()
                        series.addPoint([x, y], true, true);
                        document.getElementById('data').innerHTML=y;
                });
                },1200);
            }
        }
    },
    
    accessibility: {
        enabled: true
    },

    time: {
        useUTC: false
    },

    rangeSelector: {
        buttons: [{
            count: 1,
            type: 'minute',
            text: '1M'
        }, {
            count: 5,
            type: 'minute',
            text: '5M'
        }, {
            type: 'all',
            text: 'All'
        }],
        inputEnabled: false,
        selected: 0
    },

    title: {
        text: 'Sensor Jantung'
    },

    exporting: {
        enabled: true
      // enabled: false

    },

    series: [{
      type: 'line',
      color: '#C03030',
        negativeColor: '#297AA3',
        threshold: 100,
   
        name: 'BPM',
        data: (function () {
            // generate an array of random data
            const data = [],
                time = (new Date()).getTime();

            for (let i = -999; i <= 0; i += 1) {
                data.push([
                    time + i * 1000,
                   110
                
                ]);
            }
            return data;
        }())
    }]
});
</script>

</body>
</html>


